#!/usr/bin/env python
# -*- coding: utf-8 -*-

# File: ....py
# Author: Markus Reinhold
# Contact: leaffan@gmx.net
# Creation Date: 2012/08/06 12:22:00

u"""
... Put description here ...
"""

import re

if __name__ == '__main__':
    
    #src = r"D:\work\ms.monina\wp5\wahner_heide\2011-09-14_apex_final\orig\2011-09-14_apex_wahner_heide_4_orig.img.aux.xml"
    src = r"D:\work\ms.monina\wp5\wahner_heide\2011-09-14_apex_final\georef\2011-09-14_apex_wahner_heide_4_georef.img.aux.xml"
    
    wl_src = [0.413090, 0.426457, 0.438924, 0.450323, 0.461007, 0.470647, 0.479993,
 0.489435, 0.498933, 0.508410, 0.517128, 0.524913, 0.532336, 0.539334,
 0.545797, 0.551707, 0.556904, 0.562262, 0.567795, 0.572728, 0.576658,
 0.580678, 0.584793, 0.589006, 0.593318, 0.597734, 0.602253, 0.606880,
 0.611618, 0.616468, 0.621306, 0.623896, 0.626516, 0.629167, 0.631847,
 0.634558, 0.637363, 0.640137, 0.642944, 0.645783, 0.648659, 0.651570,
 0.654517, 0.657502, 0.660526, 0.663588, 0.666692, 0.669836, 0.673024,
 0.676254, 0.679529, 0.682847, 0.686213, 0.689626, 0.693087, 0.696597,
 0.700157, 0.703830, 0.707494, 0.711210, 0.714979, 0.718805, 0.722687,
 0.726625, 0.730622, 0.734678, 0.738793, 0.742969, 0.747208, 0.751509,
 0.755874, 0.760303, 0.764797, 0.769391, 0.773990, 0.778724, 0.783533,
 0.788358, 0.793325, 0.798314, 0.803451, 0.808677, 0.813933, 0.819345,
 0.824714, 0.830175, 0.835727, 0.841366, 0.847093, 0.852906, 0.858803,
 0.864782, 0.870843, 0.876983, 0.883205, 0.889527, 0.895969, 0.902553,
 0.909293, 0.916175, 0.923180, 0.930288, 0.937477, 0.944727, 0.952019,
 0.959331, 0.966645, 0.973938, 0.981192, 0.988385, 0.999961, 1.009132,
 1.018263, 1.026440, 1.035543, 1.044720, 1.053824, 1.063010, 1.072186,
 1.081310, 1.090486, 1.099600, 1.109776, 1.119890, 1.129067, 1.139253,
 1.148143, 1.157093, 1.167045, 1.176985, 1.185895, 1.195868, 1.204808,
 1.214698, 1.224680, 1.234590, 1.243550, 1.253553, 1.263423, 1.273393,
 1.283345, 1.292295, 1.302165, 1.311138, 1.321098, 1.331028, 1.341011,
 1.349931, 1.359820, 1.369813, 1.380713, 1.389673, 1.398646, 1.407536,
 1.418465, 1.427438, 1.437368, 1.445341, 1.458300, 1.466181, 1.476203,
 1.485083, 1.495013, 1.503006, 1.512906, 1.521826, 1.531848, 1.540738,
 1.549668, 1.558641, 1.567581, 1.577511, 1.586456, 1.595391, 1.604355,
 1.613363, 1.623338, 1.632303, 1.641258, 1.649203, 1.658168, 1.667123,
 1.677078, 1.685012, 1.693967, 1.702942, 1.711857, 1.720852, 1.728870,
 1.737825, 1.745760, 1.754725, 1.762670, 1.772615, 1.780580, 1.788524,
 1.796499, 1.805464, 1.813409, 1.822374, 1.831329, 1.838337, 1.847302,
 1.855257, 1.864182, 1.872157, 1.880101, 1.886036, 1.896001, 1.902976,
 1.910911, 1.921876, 1.928841, 1.935806, 1.942741, 1.950749, 1.959713,
 1.967658, 1.974633, 1.982588, 1.989533, 1.997498, 2.005443, 2.013418,
 2.020279, 2.028200, 2.034999, 2.042880, 2.050791, 2.057639, 2.064491,
 2.071447, 2.079364, 2.086218, 2.094145, 2.102082, 2.107989, 2.115936,
 2.122862, 2.129779, 2.137644, 2.144560, 2.151497, 2.157444, 2.165381,
 2.172268, 2.179224, 2.187079, 2.193026, 2.201912, 2.206859, 2.213816,
 2.221866, 2.227873, 2.234820, 2.241827, 2.248837, 2.255804, 2.262801,
 2.268788, 2.275808, 2.282785, 2.288762, 2.295739, 2.302736, 2.309776,
 2.315733, 2.322710, 2.328707, 2.335747, 2.342631, 2.349598, 2.355595,
 2.361469, 2.368455, 2.374392, 2.381379, 2.387293, 2.393260, 2.400217,
 2.406121, 2.412077, 2.419044, 2.425064, 2.431064, 2.437054, 2.444044,
 2.450064]
    
    lines = open(src).readlines()
    
    output = list()
    
    bd = 0
    
    for line in lines:
        line = line.rstrip()
        match = re.search("<MDI key=\"Band_(\d+)\">(.+)</MDI>", line)
        if match is not None:
            bd = int(match.group(1))
            #output.append("    <MDI key=\"Band_%s\">Band %s [%s]</MDI>" % (match.group(1), match.group(1), match.group(2)))
            output.append("    <MDI key=\"Band_%s\">Band %s [%f Micrometers]</MDI>" % (match.group(1), match.group(1), wl_src[bd - 1]))
            continue
        match = re.search("<PAMRasterBand band=\"(\d+)\">", line)
        if match is not None:
            bd = int(match.group(1))
        match = re.search("<Description>(.+)</Description>", line)
        if match is not None:
            output.append("    <Description>Band %d [%f Micrometers]</Description>" % (bd, wl_src[bd - 1]))
            continue
        
        output.append(line)
    
    
    tgt = src + "__"
    
    open(tgt, 'wb').write("\n".join(output))